{namespace newsletter=Mirko\Newsletter\ViewHelpers}

<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">

<newsletter:includeCssFile name="module.css"/>

<f:form name="newsletter" action="newsletter" class="form-horizontal" arguments="{id:configuration.pageId}">
    <div class="row row-cols-auto align-items-center g-3 mb-3">
        <div class="col">
            <label for="page" class="form-label">
                <f:translate key="Mode"/>
            </label>
            <f:form.select class="form-select" id="page" name="page" options="{pages}" optionValueField="name"
                           optionLabelField="label" value="{page}"
                           additionalAttributes="{data-global-event='change', data-action-submit: '$form'}"/>

            <f:if condition="{page} ">
                <f:render partial="Statistics/{page}" arguments="{_all}"/>
            </f:if>
        </div>
    </div>
</f:form>

<div id="NewsletterList" class="ag-theme-alpine" style="height: 500px; min-width: 500px"></div>

<div class="tabs">
    <div class="tabs__header">
        <div class="tabs__list">
            <div class="tabs__item tabs__item_active" data-tab="overview">
                <button class="tabs__button">overview</button>
            </div>
            <div class="tabs__item" data-tab="emails">
                <button class="tabs__button">emails</button>
            </div>
            <div class="tabs__item" data-tab="links">
                <button class="tabs__button">links</button>
            </div>
        </div>
    </div>
    <div class="tabs__body">
        <div class="tab tab_active" data-tab="overview">
            <p>test</p>
            <div class="overviewContainer">
                <div class="overviewStats">
                    <div class="overviewStats__pieChartContainer">
                        <canvas id="overviewStatsPieChart" width="250" height="250"></canvas>
                    </div>
                    <div class="overviewStats__group">
                        <div class="overview__recipients-count">
                            <span class="statsCounter"></span> recipients
                        </div>
                        <div class="overview__emailsOpened">
                            <span class="statsCounter status-green"></span> emails opened
                        </div>
                        <div class="overview__emailsBounced">
                            <span class="statsCounter status-red"></span> emails bounced
                        </div>
                        <div class="overview__clickedLinks">
                            <span class="statsCounter status-yellow"></span> clicked links
                        </div>
                        <div class="overview__plannedDate">
                            Planned to be sent on <span class="statsCounter"></span>
                        </div>
                        <div class="overview__startDate">
                            Started sending on <span class="statsCounter"></span>
                        </div>
                    </div>
                </div>
                <div class="timelineChartContainer">
                    <canvas id="timelineChart" height="300px"></canvas>
                </div>
            </div>
        </div>
        <div class="tab" data-tab="emails">
            <div id="EmailList" class="ag-theme-alpine" style="height: 500px; min-width: 500px"></div>
        </div>
        <div class="tab" data-tab="links">
            <div id="LinksList" class="ag-theme-alpine" style="height: 500px; min-width: 500px"></div>
        </div>
    </div>
</div>

<script type="text/javascript">
    const moduleUrl = '{f:format.raw(value: moduleUrl)}';
    const emailShowUrl = '{f:format.raw(value: configuration.emailShowUrl)}';
</script>
</html>
