module.tx_newsletter {
	view {
		templateRootPath = {$module.tx_newsletter.view.templateRootPath}
		partialRootPath = {$module.tx_newsletter.view.partialRootPath}
		layoutRootPath = {$module.tx_newsletter.view.layoutRootPath}
	}
	features {
		rewrittenPropertyMapper = 0
	}
	persistence {
		storagePid = {$module.tx_newsletter.persistence.storagePid}
	}
	settings {
		storagePid = {$module.tx_newsletter.persistence.storagePid}
	}
}

config.tx_extbase {

	mvc {
		requestHandlers {
			Mirko\Newsletter\MVC\ExtDirect\RequestHandler = Mirko\Newsletter\MVC\ExtDirect\RequestHandler
		}
	}
	persistence.classes {

		# Defines all possibles subclasses of recipientList
		Mirko\Newsletter\Domain\Model\RecipientList.subclasses {
			Mirko\Newsletter\Domain\Model\RecipientList\BeUsers = Mirko\Newsletter\Domain\Model\RecipientList\BeUsers
			Mirko\Newsletter\Domain\Model\RecipientList\FeGroups = Mirko\Newsletter\Domain\Model\RecipientList\FeGroups
			Mirko\Newsletter\Domain\Model\RecipientList\FePages = Mirko\Newsletter\Domain\Model\RecipientList\FePages
			Mirko\Newsletter\Domain\Model\RecipientList\Sql = Mirko\Newsletter\Domain\Model\RecipientList\Sql
			Mirko\Newsletter\Domain\Model\RecipientList\CsvFile = Mirko\Newsletter\Domain\Model\RecipientList\CsvFile
			Mirko\Newsletter\Domain\Model\RecipientList\CsvList = Mirko\Newsletter\Domain\Model\RecipientList\CsvList
			Mirko\Newsletter\Domain\Model\RecipientList\CsvUrl = Mirko\Newsletter\Domain\Model\RecipientList\CsvUrl
			Mirko\Newsletter\Domain\Model\RecipientList\Html = Mirko\Newsletter\Domain\Model\RecipientList\Html
		}

		# For all types, defines what class will used for the recordType, and what table will be used for storage
		Mirko\Newsletter\Domain\Model\RecipientList\BeUsers.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\BeUsers
				tableName = tx_newsletter_domain_model_recipientlist
		}

		Mirko\Newsletter\Domain\Model\RecipientList\FeGroups.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\FeGroups
				tableName = tx_newsletter_domain_model_recipientlist
		}

		Mirko\Newsletter\Domain\Model\RecipientList\FePages.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\FePages
				tableName = tx_newsletter_domain_model_recipientlist
		}

		Mirko\Newsletter\Domain\Model\RecipientList\Sql.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\Sql
				tableName = tx_newsletter_domain_model_recipientlist
		}

		Mirko\Newsletter\Domain\Model\RecipientList\CsvFile.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\CsvFile
				tableName = tx_newsletter_domain_model_recipientlist
		}

		Mirko\Newsletter\Domain\Model\RecipientList\CsvList.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\CsvList
				tableName = tx_newsletter_domain_model_recipientlist
		}

		Mirko\Newsletter\Domain\Model\RecipientList\CsvUrl.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\CsvUrl
				tableName = tx_newsletter_domain_model_recipientlist
		}

		Mirko\Newsletter\Domain\Model\RecipientList\Html.mapping {
				recordType = Mirko\Newsletter\Domain\Model\RecipientList\Html
				tableName = tx_newsletter_domain_model_recipientlist
		}
	}
}


###############################
# Declare a page type for blank page where the entire content will be output by ourselve
###############################
tx_newsletter_blank_page = PAGE
tx_newsletter_blank_page {
    typeNum = 1342671779
    config {
        disableAllHeaderCode = 1
        xhtml_cleaning = 0
        admPanel = 0
    }
    10 = COA_INT
    10 {
        10 = USER_INT
        10 {
            userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
            extensionName = Newsletter
            vendorName = Mirko
            pluginName = p
            features {
                requireCHashArgumentForActionArguments = 0
            }
			switchableControllerActions {
				Email {
					1 = show
					2 = opened
					3 = unsubscribe
				}

				Link {
					1 = clicked
				}

				RecipientList {
					1 = export
				}
			}
        }
    }
}
